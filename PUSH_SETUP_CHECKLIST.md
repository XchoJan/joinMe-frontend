# –ß–µ–∫–ª–∏—Å—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

## ‚úÖ –ß—Ç–æ —É–∂–µ —Å–¥–µ–ª–∞–Ω–æ:

1. **–ë—ç–∫–µ–Ω–¥:**
   - ‚úÖ NotificationsService —Å–æ–∑–¥–∞–Ω –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
   - ‚úÖ PROJECT_ID –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏: `joinme-f9d79`
   - ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ push –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞—è–≤–∫–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞
   - ‚úÖ Endpoint –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è FCM —Ç–æ–∫–µ–Ω–∞: `PUT /users/:id/fcm-token`

2. **–§—Ä–æ–Ω—Ç–µ–Ω–¥:**
   - ‚úÖ @react-native-firebase —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
   - ‚úÖ –°–µ—Ä–≤–∏—Å pushNotifications —Å–æ–∑–¥–∞–Ω
   - ‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤ AppContext –ø—Ä–∏ –≤—Ö–æ–¥–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ FCM —Ç–æ–∫–µ–Ω–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
   - ‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è foreground/background —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

3. **Firebase:**
   - ‚úÖ GoogleService-Info.plist –¥–æ–±–∞–≤–ª–µ–Ω –≤ –ø—Ä–æ–µ–∫—Ç
   - ‚úÖ Pods —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã

## ‚ùå –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:

### 1. –ü–æ–ª—É—á–∏—Ç—å Service Account Key –∏–∑ Firebase Console

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ [Firebase Console](https://console.firebase.google.com/)
2. –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç `joinme-f9d79`
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Project Settings** (‚öôÔ∏è) ‚Üí **Service accounts**
4. –ù–∞–∂–º–∏—Ç–µ **Generate new private key**
5. –°–∫–∞—á–∞–π—Ç–µ JSON —Ñ–∞–π–ª (–Ω–∞–ø—Ä–∏–º–µ—Ä, `joinme-firebase-adminsdk.json`)

### 2. –°–æ–∑–¥–∞—Ç—å .env —Ñ–∞–π–ª –Ω–∞ –±—ç–∫–µ–Ω–¥–µ

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `/Users/xchoharutyunyan/Desktop/Root/joinme-backend/.env`:

```env
# PROJECT_ID —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏: joinme-f9d79
# –£–∫–∞–∑—ã–≤–∞—Ç—å –Ω–µ –Ω—É–∂–Ω–æ!

# –≠—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ —Å–∫–∞—á–∞–Ω–Ω–æ–≥–æ JSON —Ñ–∞–π–ª–∞ Service Account Key:
FIREBASE_CLIENT_EMAIL=firebase-adminsdk-xxxxx@joinme-f9d79.iam.gserviceaccount.com
FIREBASE_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nYOUR_PRIVATE_KEY_HERE\n-----END PRIVATE KEY-----\n"
```

**–ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è:**
- –û—Ç–∫—Ä–æ–π—Ç–µ —Å–∫–∞—á–∞–Ω–Ω—ã–π JSON —Ñ–∞–π–ª
- `FIREBASE_CLIENT_EMAIL` = –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ –ø–æ–ª—è `client_email`
- `FIREBASE_PRIVATE_KEY` = –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ –ø–æ–ª—è `private_key` (—Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é, –≤–∫–ª—é—á–∞—è `\n`)

### 3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Capabilities –≤ Xcode

1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–æ–µ–∫—Ç: `open ios/JoinMe.xcworkspace`
2. –í—ã–±–µ—Ä–∏—Ç–µ target **JoinMe**
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Signing & Capabilities**
4. –ù–∞–∂–º–∏—Ç–µ **+ Capability**
5. –î–æ–±–∞–≤—å—Ç–µ **Push Notifications**
6. –î–æ–±–∞–≤—å—Ç–µ **Background Modes** –∏ –≤–∫–ª—é—á–∏—Ç–µ **Remote notifications**

### 4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –±—ç–∫–µ–Ω–¥

–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è `.env` —Ñ–∞–π–ª–∞:

```bash
cd /Users/xchoharutyunyan/Desktop/Root/joinme-backend
npm run start:dev
```

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ - –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
```
Firebase Admin initialized for project: joinme-f9d79
```

### 5. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ iOS –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
2. –í–æ–π–¥–∏—Ç–µ –≤ –ø—Ä–æ—Ñ–∏–ª—å
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ - –¥–æ–ª–∂–µ–Ω —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å—Å—è FCM —Ç–æ–∫–µ–Ω
4. –ü–æ–ø—Ä–æ—Å–∏—Ç–µ –¥—Ä—É–≥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É –Ω–∞ –≤–∞—à–µ —Å–æ–±—ã—Ç–∏–µ
5. –í—ã –¥–æ–ª–∂–Ω—ã –ø–æ–ª—É—á–∏—Ç—å push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã:

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ FCM —Ç–æ–∫–µ–Ω —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è:

```bash
# –í –ª–æ–≥–∞—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
# "FCM Token: [–¥–ª–∏–Ω–Ω–∞—è —Å—Ç—Ä–æ–∫–∞]"
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ Firebase Admin –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω:

```bash
# –í –ª–æ–≥–∞—Ö –±—ç–∫–µ–Ω–¥–∞ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
# "Firebase Admin initialized for project: joinme-f9d79"
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É push:

```bash
# –í –ª–æ–≥–∞—Ö –±—ç–∫–µ–Ω–¥–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞—è–≤–∫–∏ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
# "Successfully sent notification: [message_id]"
```

## üêõ –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

1. **"Firebase Admin not initialized"** - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ `.env` —Ñ–∞–π–ª
2. **"Push notification permission denied"** - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ Capabilities –≤ Xcode
3. **"FCM token is empty"** - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∏–ª–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ
4. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ –ø—Ä–∏—Ö–æ–¥—è—Ç** - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –±—ç–∫–µ–Ω–¥ –∑–∞–ø—É—â–µ–Ω –∏ Firebase Admin –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω

